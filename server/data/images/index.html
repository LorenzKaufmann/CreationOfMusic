<!DOCTYPE html>
<head>
    <script src="https://webrtc.github.io/adapter/adapter-latest.js"></script>
    <script>

        var pcConnections = [];

            console.log(pcConnections);
            const pc = new RTCPeerConnection({
                iceServers: [
                ],
            });
            pc.onicecandidate = event => {
                if (event.candidate === null) {
                    document.getElementById("test").textContent = btoa(
                    JSON.stringify(pc.localDescription)
                    );
                }
            }

            pc.onnegotiationneeded = (e) =>
                pc
                    .createOffer()
                    .then((d) => pc.setLocalDescription(d))
                    .catch(console.error);

            navigator.mediaDevices
            .getUserMedia({
                video: false,
                audio: true,
            })
            .then((stream) => {
                document.getElementById("browserVideo").srcObject = stream;
                pc.addTransceiver(stream.getAudioTracks()[0], {
                direction: "sendonly",
                streams: [stream]
                });
            });
                        
            pcConnections.push(pc);
            console.log(pcConnections);
        


    </script>
</head>
<body>
    <h2>dfsfadsdsf</h2>
    <audio controls id="browserVideo"></audio>
    <p id="test"></p>
</body>